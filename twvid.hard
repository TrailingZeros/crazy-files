#!/bin/bash

twdl () {
    python3 $(which youtube-dl) --cookies=$HOME/ck.txt --output='Twitter-%(uploader_id)s-%(id)s.%(ext)s' "$@"
}

for i in "$@"; do ./.twvid.hard.extractor.js "$i" || true ; done | \
  grep -Eo 'status/[0-9]+' | \
  grep -Eo '[0-9]+' | \
  sort -u | \
  while read line ; do \
    twdl "https://twitter.com/i/web/status/$line"
  done

exit 0
